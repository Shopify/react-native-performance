"use strict";(self.webpackChunkreact_native_performance=self.webpackChunkreact_native_performance||[]).push([[970],{3905:function(e,t,n){n.d(t,{Zo:function(){return c},kt:function(){return m}});var r=n(7294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var s=r.createContext({}),p=function(e){var t=r.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},c=function(e){var t=p(e.components);return r.createElement(s.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},u=r.forwardRef((function(e,t){var n=e.components,a=e.mdxType,o=e.originalType,s=e.parentName,c=l(e,["components","mdxType","originalType","parentName"]),u=p(n),m=a,g=u["".concat(s,".").concat(m)]||u[m]||d[m]||o;return n?r.createElement(g,i(i({ref:t},c),{},{components:n})):r.createElement(g,i({ref:t},c))}));function m(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var o=n.length,i=new Array(o);i[0]=u;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l.mdxType="string"==typeof e?e:a,i[1]=l;for(var p=2;p<o;p++)i[p]=n[p];return r.createElement.apply(null,i)}return r.createElement.apply(null,n)}u.displayName="MDXCreateElement"},6402:function(e,t,n){n.r(t),n.d(t,{assets:function(){return c},contentTitle:function(){return s},default:function(){return m},frontMatter:function(){return l},metadata:function(){return p},toc:function(){return d}});var r=n(7462),a=n(3366),o=(n(7294),n(3905)),i=["components"],l={id:"debugging",title:"Debugging",slug:"/fundamentals/debugging"},s=void 0,p={unversionedId:"fundamentals/debugging",id:"fundamentals/debugging",title:"Debugging",description:"Error types",source:"@site/docs/fundamentals/debugging.md",sourceDirName:"fundamentals",slug:"/fundamentals/debugging",permalink:"/react-native-performance/docs/fundamentals/debugging",editUrl:"https://github.com/shopify/react-native-performance/edit/main/docs/docs/fundamentals/debugging.md",tags:[],version:"current",frontMatter:{id:"debugging",title:"Debugging",slug:"/fundamentals/debugging"},sidebar:"tutorialSidebar",previous:{title:"State Machine",permalink:"/react-native-performance/docs/fundamentals/state-machine"},next:{title:"Measuring Render Time",permalink:"/react-native-performance/docs/fundamentals/measuring-render-times"}},c={},d=[{value:"Error types",id:"error-types",level:2},{value:"Logger",id:"logger",level:2}],u={toc:d};function m(e){var t=e.components,n=(0,a.Z)(e,i);return(0,o.kt)("wrapper",(0,r.Z)({},u,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h2",{id:"error-types"},"Error types"),(0,o.kt)("p",null,"The main goal of the package is reporting performance metrics. However, sometimes the library encounters errors - either internal or caused by incorrect usage. By default, the library only reports errors that are ",(0,o.kt)("em",{parentName:"p"},"actionable")," and ",(0,o.kt)("em",{parentName:"p"},"impact measurements"),"."),(0,o.kt)("p",null,"The performance library produces two error types:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"bug")," errors that are tied to internal issues and are handled by the library itself,"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"fatal")," errors are thrown when we detect incorrect library usage and are passed to ",(0,o.kt)("inlineCode",{parentName:"li"},"errorHandler")," in ",(0,o.kt)("inlineCode",{parentName:"li"},"PerformanceProfiler."))),(0,o.kt)("p",null,"Only ",(0,o.kt)("inlineCode",{parentName:"p"},"fatal")," errors make it to the error handler and get thrown to the app and (possibly) to the error dashboard. Those errors are legit and should be actionable. You can learn more about ",(0,o.kt)("inlineCode",{parentName:"p"},"fatal")," errors ",(0,o.kt)("a",{parentName:"p",href:"../errors"},"here"),"."),(0,o.kt)("p",null,"Internal ",(0,o.kt)("inlineCode",{parentName:"p"},"bug")," errors signalize that something goes wrong or there is an unhandled flow that the library doesn't support yet. They will be shown when you are in ",(0,o.kt)("strong",{parentName:"p"},"DEBUG")," mode. When you stumble upon a ",(0,o.kt)("inlineCode",{parentName:"p"},"bug")," error, we kindly ask you to ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/Shopify/react-native-performance/issues/new"},"report an issue"),", so we can look into it."),(0,o.kt)("h2",{id:"logger"},"Logger"),(0,o.kt)("p",null,"We value the developer's console and do not want to overflow it with information the developer might not need at the moment. However, it's possible to log verbose details if needed for debugging performance issues."),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Logging")," is divided into multiple levels: error, warn, info, and debug. You can explicitly tell the library which lowest level is needed at the moment. For example, you might want to use ",(0,o.kt)("inlineCode",{parentName:"p"},"info")," level logs when inspecting performance issues and disable them when working on something else."),(0,o.kt)("p",null,"There are three following log levels available:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"Error")," level would log internal errors and errors signalizing incorrect usage of the library's API"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"Warn")," level logs not errors, but warnings that signalize that ",(0,o.kt)("em",{parentName:"li"},"something goes not as expected")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"Info")," level logs additional information useful for debugging performance issues + render pass reports."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"Debug")," is the lowest level that includes any additional for debugging the package itself + ",(0,o.kt)("a",{parentName:"li",href:"./state-machine"},"state machine")," changes.")),(0,o.kt)("p",null,"By default, ",(0,o.kt)("inlineCode",{parentName:"p"},"PerformanceProfiler")," is initialized with the log level ",(0,o.kt)("inlineCode",{parentName:"p"},"warn.")," It means that errors and warnings would appear on the console in debug builds. Since console.","*"," calls are synchronous, logging happens only in a development environment (when React Native packager is running) to ensure it doesn't degrade the performance of a released application."),(0,o.kt)("p",null,"To change the log level, change the prop passed to the ",(0,o.kt)("inlineCode",{parentName:"p"},"PerformanceProfiler"),":"),(0,o.kt)("div",{className:"shiki-twoslash-fragment"},(0,o.kt)("pre",{parentName:"div",className:"shiki min-light",style:{backgroundColor:"#ffffff",color:"#24292eff"}},(0,o.kt)("div",{parentName:"pre",className:"language-id"},"tsx"),(0,o.kt)("div",{parentName:"pre",className:"code-container"},(0,o.kt)("code",{parentName:"div"},(0,o.kt)("div",{parentName:"code",className:"line"},(0,o.kt)("span",{parentName:"div",style:{color:"#24292EFF"}},"<"),(0,o.kt)("span",{parentName:"div",style:{color:"#1976D2"}},"PerformanceProfiler"),(0,o.kt)("span",{parentName:"div",style:{color:"#24292EFF"}}," "),(0,o.kt)("span",{parentName:"div",style:{color:"#6F42C1"}},"logLevel"),(0,o.kt)("span",{parentName:"div",style:{color:"#D32F2F"}},"="),(0,o.kt)("span",{parentName:"div",style:{color:"#24292EFF"}},"{"),(0,o.kt)("span",{parentName:"div",style:{color:"#1976D2"}},"LogLevel"),(0,o.kt)("span",{parentName:"div",style:{color:"#24292EFF"}},".Debug}>"))))),(0,o.kt)("pre",{parentName:"div",className:"shiki nord",style:{backgroundColor:"#2e3440ff",color:"#d8dee9ff"}},(0,o.kt)("div",{parentName:"pre",className:"language-id"},"tsx"),(0,o.kt)("div",{parentName:"pre",className:"code-container"},(0,o.kt)("code",{parentName:"div"},(0,o.kt)("div",{parentName:"code",className:"line"},(0,o.kt)("span",{parentName:"div",style:{color:"#81A1C1"}},"<"),(0,o.kt)("span",{parentName:"div",style:{color:"#8FBCBB"}},"PerformanceProfiler"),(0,o.kt)("span",{parentName:"div",style:{color:"#D8DEE9FF"}}," "),(0,o.kt)("span",{parentName:"div",style:{color:"#8FBCBB"}},"logLevel"),(0,o.kt)("span",{parentName:"div",style:{color:"#81A1C1"}},"={"),(0,o.kt)("span",{parentName:"div",style:{color:"#D8DEE9"}},"LogLevel"),(0,o.kt)("span",{parentName:"div",style:{color:"#ECEFF4"}},"."),(0,o.kt)("span",{parentName:"div",style:{color:"#D8DEE9"}},"Debug"),(0,o.kt)("span",{parentName:"div",style:{color:"#81A1C1"}},"}>")))))))}m.isMDXComponent=!0}}]);